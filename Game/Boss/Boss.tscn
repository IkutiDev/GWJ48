[gd_scene load_steps=19 format=2]

[ext_resource path="res://Boss/daMoon.png" type="Texture" id=1]
[ext_resource path="res://Resouces/Particles/SmallPoint.png" type="Texture" id=2]
[ext_resource path="res://Boss/daEye1.png" type="Texture" id=3]
[ext_resource path="res://Boss/daEye2.png" type="Texture" id=4]
[ext_resource path="res://Resouces/ShaderTextures/Noise5.png" type="Texture" id=5]
[ext_resource path="res://Boss/daEye3.png" type="Texture" id=6]
[ext_resource path="res://StateMachine/StateMachine.gd" type="Script" id=7]
[ext_resource path="res://Boss/Boss.gd" type="Script" id=8]
[ext_resource path="res://Boss/daEye4.png" type="Texture" id=9]
[ext_resource path="res://Boss/Spawn.gd" type="Script" id=10]

[sub_resource type="CircleShape2D" id=30]
radius = 23.0

[sub_resource type="Shader" id=25]
code = "shader_type canvas_item;
uniform vec2 scrollSpeed = vec2(1.0,1.0);
uniform sampler2D texture2;
uniform sampler2D gradient;
uniform float FPS = 30.0;
uniform float col1bonus = 0.0;
uniform float col2bonus = 0.0;


void fragment(){
	float color1 = col1bonus + texture(TEXTURE, UV).r;
	float color2 = col2bonus + texture(texture2, UV + scrollSpeed * round(TIME*(FPS)) ).r;
	float energ = color1 * color2 ;
	COLOR = texture(gradient, vec2(energ));
}"

[sub_resource type="Gradient" id=26]
interpolation_mode = 1
offsets = PoolRealArray( 0, 0.0451613, 0.516129, 0.651613 )
colors = PoolColorArray( 0.0588235, 0.0941176, 0.0941176, 0, 0.9203, 0.893066, 0.921875, 1, 0.984375, 0.0230713, 0.631396, 1, 0, 0, 0, 1 )

[sub_resource type="GradientTexture" id=27]
gradient = SubResource( 26 )
width = 20

[sub_resource type="ShaderMaterial" id=28]
shader = SubResource( 25 )
shader_param/scrollSpeed = Vector2( 0.05, -0.05 )
shader_param/FPS = 8.0
shader_param/col1bonus = -0.665
shader_param/col2bonus = 3.21
shader_param/texture2 = ExtResource( 5 )
shader_param/gradient = SubResource( 27 )

[sub_resource type="SpriteFrames" id=1]
animations = [ {
"frames": [ ExtResource( 3 ), ExtResource( 4 ), ExtResource( 6 ), ExtResource( 9 ), ExtResource( 6 ), ExtResource( 4 ), ExtResource( 3 ) ],
"loop": true,
"name": "open",
"speed": 2.0
}, {
"frames": [ ExtResource( 9 ) ],
"loop": true,
"name": "stare",
"speed": 2.0
} ]

[sub_resource type="PhysicsMaterial" id=29]
friction = 0.0
bounce = 0.6

[sub_resource type="CircleShape2D" id=2]
radius = 5.0

[node name="Boss" type="KinematicBody2D"]
script = ExtResource( 8 )

[node name="PinJoint2D" type="PinJoint2D" parent="."]
node_a = NodePath("..")
node_b = NodePath("../Ball")

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
shape = SubResource( 30 )

[node name="DaMoon" type="Sprite" parent="."]
modulate = Color( 0.890196, 0.368627, 0.564706, 1 )
texture = ExtResource( 1 )

[node name="AnimatedSprite" type="AnimatedSprite" parent="."]
material = SubResource( 28 )
frames = SubResource( 1 )
animation = "open"
frame = 5
playing = true
__meta__ = {
"_editor_description_": ""
}

[node name="Ball" type="RigidBody2D" parent="."]
collision_layer = 128
collision_mask = 128
mass = 6.0
physics_material_override = SubResource( 29 )

[node name="SmallPoint" type="Sprite" parent="Ball"]
modulate = Color( 0, 0, 0, 1 )
texture = ExtResource( 2 )

[node name="CollisionShape2D" type="CollisionShape2D" parent="Ball"]
shape = SubResource( 2 )

[node name="Rim" type="StaticBody2D" parent="."]
collision_layer = 128
collision_mask = 128

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="Rim"]
polygon = PoolVector2Array( -18, -8, -19, -4, -19, 5, -16, 11, -11, 16, -3, 20, 6, 19, 14, 14, 19, 7, 20, -3, 16, -12, 11, -17, 5, -20, 1, -20, 1, -15, 6, -15, 9, -13, 12, -9, 14, -6, 15, -3, 15, 2, 14, 6, 11, 10, 8, 12, 5, 14, -5, 14, -9, 12, -13, 8, -16, 3, -16, -3, -15, -7, -12, -11, -8, -14, -3, -15, 0, -15, 0, -20, -6, -19, -11, -16, -15, -13 )

[node name="StateMachine" type="Node" parent="."]
script = ExtResource( 7 )
initial_state = NodePath("Spawn")

[node name="Spawn" type="Node" parent="StateMachine"]
script = ExtResource( 10 )
